import{e as v,r as a,f as b,c as E,g as S,y as t,j as e}from"./index-Cf5WGJKA.js";import{u as y,c as L,a as u}from"./index.esm-CTrAzhTA.js";const f=(s,r)=>v({"form-control my-2":!0,"is-invalid":s.touched[r]&&s.errors[r],"is-valid":s.touched[r]&&!s.errors[r]}),P=()=>{const[s,r]=a.useState(!1),[p,{isSuccess:o,isError:n,error:l,isLoading:h}]=b(),x=E(),[g,{isSuccess:d,isError:c,error:N,isLoading:j}]=S(),i=y({initialValues:{userName:"",otp:""},validationSchema:L({userName:u().required(),otp:u()}),onSubmit:(m,{resetForm:O})=>{s?p(m):g(m)}});return a.useEffect(()=>{d&&(i.setFieldValue("otp",""),r(!0),t.success("please verify otp"))},[d]),a.useEffect(()=>{c&&t.error(N.message)},[c]),a.useEffect(()=>{o&&x("/admin")},[o]),a.useEffect(()=>{n&&(r(!1),t.error(l.data?l.data.message:"sosmething went wrong"))},[n]),j||h?e.jsx("p",{children:"Please Wait ...."}):e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:i.handleSubmit,children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-sm-6 offset-sm-3",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:"Login"}),e.jsxs("div",{className:"card-body",children:[s?e.jsxs("div",{children:[e.jsx("label",{for:"otp",className:"form-label",children:"Enter Otp"}),e.jsx("input",{type:"text",...i.getFieldProps("otp"),className:f(i,"otp"),id:"otp",placeholder:"Enter Your otp"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:i.errors.otp})]}):e.jsxs("div",{children:[e.jsx("label",{for:"email",className:"form-label",children:"Enter Email Or Mobile Number"}),e.jsx("input",{type:"text",...i.getFieldProps("userName"),className:f(i,"userName"),id:"email",placeholder:"Enter Your Email Or Mobile Number"}),e.jsx("div",{className:"valid-feedback",children:"Looks good!"}),e.jsx("div",{className:"invalid-feedback",children:i.errors.userName})]}),e.jsx("button",{type:"submit",className:"btn btn-primary w-100 mt-3",children:s?"Verify OTP":"Login"})]})]})})})})})})};export{P as default};
