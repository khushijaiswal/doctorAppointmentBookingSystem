import{k as x,r as n,y as j,j as e,L as N}from"./index-Cf5WGJKA.js";import{u as v,c as p,b as S,a as i,d as b}from"./index.esm-CTrAzhTA.js";import{C as F}from"./Container-BW2GVLOL.js";import{B as c}from"./Button-B-YmbsIc.js";import"./ThemeProvider-CfEuxjvP.js";const k=()=>{const[h,{isSuccess:o,isLoading:d}]=x(),[E,f]=n.useState(null),[m,u]=n.useState(null),s=v({enableReinitialize:!0,initialValues:{name:"",email:"",specialization:"",phone:"",address:"",profileImage:null,schedule:[]},validationSchema:p({name:i().required("Enter name"),email:i().required("Enter email"),specialization:i().required("Enter specialization"),phone:i().required("Enter phone"),address:i().required("Enter address"),profileImage:b().required("Upload profile image"),schedule:S().of(p().shape({day:i().required("Enter day"),startTime:i().required("Enter start time"),endTime:i().required("Enter end time")})).min(1,"At least one schedule entry is required")}),onSubmit:(t,{resetForm:l})=>{console.log(t);const r=new FormData;for(const a in t)a==="schedule"?r.append("schedule",JSON.stringify(t.schedule)):a!=="profileImage"&&r.append(a,t[a]);t.profileImage&&r.append("profileImage",t.profileImage),h(r),l()}});n.useEffect(()=>{o&&j.success("Doctor register success")},[o]);const g=()=>{s.setFieldValue("schedule",[...s.values.schedule,{day:"",startTime:"",endTime:""}])},y=t=>{const l=s.values.schedule.filter((r,a)=>a!==t);s.setFieldValue("schedule",l)};return e.jsx(F,{children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-sm-6 offset-3",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header text-center",children:"Doctor Registration"}),e.jsxs("div",{className:"card-body",children:[e.jsxs("form",{onSubmit:s.handleSubmit,children:[e.jsx("input",{className:"form-control my-2",...s.getFieldProps("name"),type:"text",placeholder:"Name"}),e.jsx("input",{className:"form-control my-2",...s.getFieldProps("email"),type:"email",placeholder:"Email"}),e.jsx("input",{className:"form-control my-2",...s.getFieldProps("specialization"),type:"text",placeholder:"Specialization"}),e.jsx("input",{className:"form-control my-2",...s.getFieldProps("phone"),type:"text",placeholder:"Phone"}),e.jsx("input",{className:"form-control my-2",...s.getFieldProps("address"),type:"text",placeholder:"Address"}),e.jsx("input",{className:"form-control my-2",type:"file",onChange:t=>{const l=t.target.files[0];l&&(u(URL.createObjectURL(l)),s.setFieldValue("profileImage",l))}}),m&&e.jsx("img",{src:m,height:50,className:"my-2"}),e.jsx(c,{onClick:()=>{f(!1),u([]),s.setFieldValue("profileImage","")},className:"me-2 my-2 btn-danger btn-sm",children:"Cancel"}),e.jsx("h5",{children:"Schedule"}),s.values.schedule.map((t,l)=>e.jsxs("div",{className:"d-flex gap-2 align-items-center my-2",children:[e.jsx("input",{className:"form-control",type:"text",placeholder:"Day",value:t.day,onChange:r=>{const a=[...s.values.schedule];a[l].day=r.target.value,s.setFieldValue("schedule",a)}}),e.jsx("input",{className:"form-control",type:"time",placeholder:"Start Time",value:t.startTime,onChange:r=>{const a=[...s.values.schedule];a[l].startTime=r.target.value,s.setFieldValue("schedule",a)}}),e.jsx("input",{className:"form-control",type:"time",placeholder:"End Time",value:t.endTime,onChange:r=>{const a=[...s.values.schedule];a[l].endTime=r.target.value,s.setFieldValue("schedule",a)}}),e.jsx(c,{variant:"danger",size:"sm",onClick:()=>y(l),children:"X"})]},l)),e.jsx(c,{className:"btn btn-secondary w-100 my-2",onClick:g,children:"Add Schedule"}),e.jsx("button",{className:"btn btn-primary w-100",type:"submit",disabled:d,children:d?"Registering...":"Register"})]}),e.jsx(N,{className:"nav-link text-center p-2",to:"/login-doctor",children:"Already have an account? Sign In"})]})]})})})})};export{k as default};
